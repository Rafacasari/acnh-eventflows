flow MoveBuildError():
    run MoveBuildStateChk()
    run MoveBuildKindChk()
    run MoveBuildErrorSub()
    switch SubflowResults@3[0]:
        case 1:
            if System.EventFlags['cPlayer:MakeVillagePlayerFlag']:
                switch SubflowResults@7[1]:
                    case 1:
                        if System.EventFlags['cPlayer:RcoMoveHouseReserved']:
                            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:521_02', false)
                        else:
                            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:521_01', false)
                    case 2, 3, 4, 5, 6:
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:521_02', false)
                    default:
                        return
            else:
                if System.EventFlags['cPlayer:RcoMoveHouseReserved']:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:521_02', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:521_01', false)
        case 2:
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:521', false)
        default:
            return

flow MoveBuildErrorSub():
    EventFlowSystemActor.StructureMoveSetTag(0, 0)
    EventFlowSystemActor.StructureMoveSetTag(1, 1)
    if System.EventFlags['cPlayer:MakeVillagePlayerFlag']:
        switch SubflowResults@7[1]:
            case 1:
                if System.EventFlags['cPlayer:RcoMoveHouseReserved']:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:501', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:511', false)
            case 2:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:502', false)
            case 3:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:504', false)
            case 4:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:503', false)
            case 5:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:505', false)
            case 6:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:506', false)
            default:
                return
    else:
        switch SubflowResults@7[1]:
            case 1:
                if System.EventFlags['cPlayer:RcoMoveHouseReserved']:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:501', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:511', false)
            case 2:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:512', false)
            case 3:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:514', false)
            case 4:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:513', false)
            case 5:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:515', false)
            case 6:
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_13_Infra_MoveStructure:516', false)
            default:
                return

flow MoveBuildKindChk():
    if System.EventFlags['cLand:RcoMoveReservedKind'] >= 6:
        SubflowResults[1] = 6
    elif System.EventFlags['cLand:RcoMoveReservedKind'] >= 5:
        SubflowResults[1] = 5
    elif System.EventFlags['cLand:RcoMoveReservedKind'] >= 4:
        SubflowResults[1] = 4
    elif System.EventFlags['cLand:RcoMoveReservedKind'] >= 3:
        SubflowResults[1] = 3
    elif System.EventFlags['cLand:RcoMoveReservedKind'] >= 2:
        SubflowResults[1] = 2
    elif System.EventFlags['cLand:RcoMoveReservedKind'] < 1:
        SubflowResults[1] = 0
    else:
        SubflowResults[1] = 1

flow MoveBuildStateChk():
    if System.EventFlags['cLand:RcoMoveReservedAnyone'] >= 2:
        SubflowResults[0] = 2
    elif System.EventFlags['cLand:RcoMoveReservedAnyone'] < 1:
        SubflowResults[0] = 0
    else:
        SubflowResults[0] = 1

