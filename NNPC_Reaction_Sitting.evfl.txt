flow QuestGive_Chk():
    if MainNpc.NpcIsQuestClient('cMyQuest', true, false):
        switch MainNpc.NpcHaveQuestType(''):
            case 1:
                if MainNpc.HasNpcRequestedItem():
                    run StandingUp_Chk()
            case 2:
                if not MainNpc.NpcIsQuestClient('cLost', true, false):
                    run StandingUp_Chk()
                elif MainNpc.HasNpcRequestedItem():
                    run StandingUp_Chk()
            case 3:
                if not MainNpc.QuestFlags['cDeliveryEnd']:
                    run StandingUp_Chk()
            case 4:
                if MainNpc.HasNpcRequestedItem():
                    run StandingUp_Chk()
            default:
                return
    elif not (((not MainNpc.IsDeliveryQuestReceiver()) or (MainNpc.QuestFlags['cDeliveryEnd'])) and (((MainNpc.NpcHaveQuestType('cNotInclude') in (1, 3, 4, 5, 6, 7, 0)) and (MainNpc.QuestFlags['cLostUseHint'])) or (not MainNpc.HasNpcRequestedItem()))):
        run StandingUp_Chk()

flow Root():
    if MainNpc.NpcIsSitting() in (0, 1, 2, 3, 5):
        run QuestGive_Chk()
        if (MainNpc.NpcActivityType() == 1) and (EventFlowSystemActor.SystemCheckNowStage('cField')):
            MainNpc.NpcSetReactionType('cSitting')
            if MainNpc.EventFlags['cNpcTemp:ContinuousReactionTalkCount'] < 3:
                switch MainNpc.NpcIsSitting():
                    case 0:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Sitting:001', false)
                        run Sub_Event10()
                    case 1:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Sitting:002', false)
                        run Sub_Event17()
                    case 2:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Sitting:003', false)
                        run Sub_Event17()
                    case 3:
                        MainNpc.SetItemName(32, 0, 0)
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Sitting:004', false)
                        run Sub_Event10()
                    default:
                        return

flow StandingUp_Chk():
    switch MainNpc.NpcIsSitting():
        case 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/BO_Connect_StandingUp:201', false)
            run Sub_Event24()
        case 1, 2, 3, 5:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/BO_Connect_StandingUp:202', false)
            run Sub_Event24()
        default:
            return

local flow Sub_Event10():
    MainNpc.EventFlags['cNpcMemory:AcquaintanceshipFlagOff'] = true
    EventFlowSystemActor.ExitFlowchart()

local flow Sub_Event17():
    MainNpc.EventFlags['cNpcMemory:SitBenchFlag'] = true
    run Sub_Event10()

local flow Sub_Event24():
    MainNpc.EventFlags['cNpcMemory:StandingUpFlag'] = true
    EventFlowSystemActor.ExitFlowchart()

