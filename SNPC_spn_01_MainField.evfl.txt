flow Root():
    if not EventFlowSystemActor.IsMyVillage():
        if System.EventFlags['cPlayer:CommuneIslandAvailable']:
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:004', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:003', false)
    elif EventFlowSystemActor.PlayerHouseLevel() in (`Homeless`, `PlacedTent`):
        if System.EventFlags['cPlayer:SpnTalkBeforeGotHouseToday']:
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:006', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:005', false)
            System.EventFlags['cPlayer:SpnTalkBeforeGotHouseToday'] = true
    elif not System.EventFlags['cPlayer:CommuneIslandAvailable']:
        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:001_01', false)
        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:001_02', false)
        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:001_03', false)
        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:001_04', false)
        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:001_05', false)
        System.EventFlags['cPlayer:CommuneIslandAvailable'] = true
        System.EventFlags['cPlayer:SpnTalkAtHomelandToday'] = true
    elif System.EventFlags['cLand:CommuneExpanded']:
        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:007', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_01_MainField:002', false)

