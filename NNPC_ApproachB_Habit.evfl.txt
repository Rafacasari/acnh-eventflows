flow Cancell():
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:104', true)
    run Event14()

flow Retype():
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:103', true)
    run Event14()

flow Root():
    if MainNpc.EventFlags['cNpcSave:InputPhrase']:
        if MainNpc.CheckNpcApproachType():
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:002', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                run Sub_Event25()
            else:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:006', true)
                System.EventFlags['cPlayer:InputApproachBanCount'] = 2
        else:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:004', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                run Sub_Event25()
            else:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:008', true)
                System.EventFlags['cPlayer:InputApproachBanCount'] = 2
    elif MainNpc.CheckNpcApproachType():
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:001', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run Sub_Event25()
        else:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:005', true)
            System.EventFlags['cPlayer:InputApproachBanCount'] = 2
    else:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:003', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run Sub_Event25()
        else:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:007', false)
            System.EventFlags['cPlayer:InputApproachBanCount'] = 2

local flow Sub_Event25():
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:100', true)
entrypoint Event14:
    EventFlowSystemActor.UISoftwareKeyboardHandling('cPhrase', true)
    if EventFlowSystemActor.UIResultMenuDecide():
        EventFlowSystemActor.SetTagFromUIResult('cPhrase', 0)
        if MainNpc.NpcCheckSameWordFromSwkbd('cPhrase'):
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:102', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                switch EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
                    case 0:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:300', false)
                    case 1:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:301', false)
                    case 2:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:302', false)
                EventFlowSystemActor.SaveSetFromUIResult('cPhrase')
                MainNpc.EventFlags['cNpcSave:InputPhrase'] = true
                System.EventFlags['cPlayer:InputApproachBanCount'] = 1
            else:
                run Retype()
        else:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:101', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                if EventFlowSystemActor.RandomChoiceExcludePrevious2(2, true) == 0:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:200', false)
                else:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:201', false)
                EventFlowSystemActor.SaveSetFromUIResult('cPhrase')
                MainNpc.EventFlags['cNpcSave:InputPhrase'] = true
                MainNpc.EventFlags['cNpcSave:PlayerNamePhrase'] = true
                switch EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
                    case 0:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:202', false)
                    case 1:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:203', false)
                    case 2:
                        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Approach/BO_ApproachB_Habit:204', false)
                System.EventFlags['cPlayer:InputApproachBanCount'] = 1
            else:
                run Retype()
    else:
        run Cancell()

