flow PartyEnd_LisaTalk():
    if System.EventFlags['cPlayerTemp:AlwJuneBridePartyEndFlag']:
        MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:090', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:093', true)
            EventFlowSystemActor.WaitFrame(15)
            run System_JuneBrideParty::PartyEnd_Wipe()
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:094', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:092', false)
        System.EventFlags['cPlayerTemp:AlwJuneBridePartyEndFlag'] = true

flow PartyEnd_Stop():
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:091', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:093', true)
        EventFlowSystemActor.WaitFrame(15)
        run System_JuneBrideParty::PartyEnd_Wipe()
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:094', false)
        Player.PlayerDemoMove('cNextInfoAngle', 3)

flow PartyNow_alp():
    switch EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
        case 0:
            MainNpc.OpenMessageWindow('TalkSNpc/alp/GEvent/SP_alp_GEvent_JuneBride:105', false)
        case 1:
            MainNpc.OpenMessageWindow('TalkSNpc/alp/GEvent/SP_alp_GEvent_JuneBride:106', false)
        case 2:
            MainNpc.OpenMessageWindow('TalkSNpc/alp/GEvent/SP_alp_GEvent_JuneBride:107', false)

flow Root():
    EventFlowSystemActor.WaitFrame(30)
    EventFlowSystemActor.SetEventFlagAttendJuneBrideDemo()
    MainNpc.TurnBody(12, 0.0)
    EventFlowSystemActor.WaitFrame(30)
    run WeddingParty_Demo()
    System.EventFlags['cLandTemp:JuneBrideCeremonyDemoAfterNow'] = true
    EventFlowSystemActor.NextLPFadeOff()
    EventFlowSystemActor.AfterWeddingBGMStart()
    if EventFlowSystemActor.CanHearAudioMusicAtFocusPoint():
        EventFlowSystemActor.SystemBGMVolumeFadeOut(4.0, 3, 0.0)
    EventFlowSystemActor.MessageSuspend()
    EventFlowSystemActor.SystemReenterStage(4, 'cCircle', 'cCircle', 'cBlack', 1.0, 1.0)

flow WeddingParty_Demo():
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:080', false)
    EventFlowSystemActor.CeremonyStandup()
    fork:
        branch:
            MainNpc.TurnBody(12, 0.0)
        branch:
            SubNpc.TurnBody(12, 0.0)
        branch:
            EventFlowSystemActor.CeremonyTurn(true, 'cFacilitator', false, true)
        branch:
            EventFlowSystemActor@look.CeremonyLookAt(false, 'cFacilitator', false, true, 0.0, 0.0, 0.0)
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:081', false)
    EventFlowSystemActor.CeremonyEmoticon('FaintSmile', 'EmotEnd', 'Clapping', 'Clapping', 'Clapping', 'Clapping', 'Clapping', 'Clapping', 'Clapping', 'Clapping', 'Clapping', 75, false)
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:082', false)
    EventFlowSystemActor.CeremonyEmoticon('Smiling', 'EmotEnd', 'Smiling', 'Clapping', 'Smiling', 'HappyFlower', 'HappyDance', 'Clapping', 'Smiling', 'HappyFlower', 'HappyDance', 75, false)
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:083', false)
    EventFlowSystemActor.CeremonyLookAt(false, 'cCamera', false, false, 0.0, 0.0, 0.0)
    EventFlowSystemActor.CeremonyTurn(false, 'cCamera', false, false)
    EventFlowSystemActor.CeremonyEquipCracker(0, 6)
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:084', true)
    EventFlowSystemActor.CeremonyUseCracker()
    fork:
        branch:
            MainNpc.CharacterEmoticonAction('Smiling', true, '', 0, true)
        branch:
            EventFlowSystemActor.CeremonyEmoticon('Smiling', 'EmotEnd', 'Smiling', 'HappyFlower', 'Smiling', 'HappyFlower', 'HappyDance', 'Smiling', 'Smiling', 'Smiling', 'HappyDance', -1, false)
    MainNpc.OpenMessageWindow('TalkSNpc/alw/GEvent/SP_alw_GEvent_JuneBride:085', false)

