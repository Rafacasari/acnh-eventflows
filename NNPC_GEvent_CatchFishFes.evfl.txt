flow `Month_1.3`():
    switch EventFlowSystemActor.EnvMonth():
        case `January`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:104', false)
        case `April`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:105', false)
        case `July`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:106', false)
        case `October`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:107', false)
        default:
            return

flow `Month_1.4`():
    if EventFlowSystemActor.EnvWeatherArea() == `cWeatherArea_North`:
        run `Northern_1.4`()
    else:
        run `Southern_1.4`()

flow NNPC_AfterEV():
    if not MainNpc.EventFlags['cNpcMemory:GEventTalkAfterFlag']:
        MainNpc.EventFlags['cNpcMemory:GEventTalkAfterFlag'] = true
        switch EventFlowSystemActor.RandomChoice3(3):
            case 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:008', true)
            case 1:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:009', true)
            case 2:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:007', true)
        EventFlowSystemActor.ExitFlowchart()

flow NNPC_BeforeEV():
    switch EventFlowSystemActor.RandomChoice3(3):
        case 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:001', true)
        case 1:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:002', true)
        case 2:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:003', true)
    EventFlowSystemActor.ExitFlowchart()

flow NNPC_OpenEV():
    if MainNpc.EventFlags['cNpcMemory:GEventTalkProgressFlag']:
        switch EventFlowSystemActor.RandomChoiceExcludePrevious4(4, true):
            case 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:010', true)
            case 1:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:011', true)
            case 2:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:012', true)
            case 3:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:013', true)
        EventFlowSystemActor.ExitFlowchart()
    else:
        MainNpc.EventFlags['cNpcMemory:GEventTalkProgressFlag'] = true
        switch EventFlowSystemActor.RandomChoiceExcludePrevious5(5, true):
            case 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:004', true)
            case 1:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:005', true)
            case 2:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:006', true)
            case 3:
                run `Month_1.3`()
            case 4:
                run `Month_1.4`()
        EventFlowSystemActor.ExitFlowchart()

flow `Northern_1.4`():
    switch EventFlowSystemActor.EnvMonth():
        case `January`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:201', false)
        case `April`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:202', false)
        case `July`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:203', false)
        case `October`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:204', false)
        default:
            return

flow Root():
    if EventFlowSystemActor.SystemCheckNowStage('cField'):
        switch EventFlowSystemActor.EventCheck('FishingConvention'):
            case 0:
                run NNPC_BeforeEV()
            case 1:
                run NNPC_OpenEV()
            case 2:
                if EventFlowSystemActor.EnvHourCompare(19, -1, true, true) in (0, 1):
                    run NNPC_AfterEV()
            default:
                return

flow `Southern_1.4`():
    switch EventFlowSystemActor.EnvMonth():
        case `January`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:205', false)
        case `April`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:206', false)
        case `July`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:207', false)
        case `October`:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/GEvent/BO_GEvent_CatchFishFes:208', false)
        default:
            return

