flow Begin():
    MainNpc.SetDeliveryQuestInfo()
    MainNpc.SetDeliveryItem(0, true)
    MainNpc.SetNpcName(8, 0)
    switch MainNpc.DeliveryQuestType():
        case 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:001', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:004', false)
                run Yes()
            else:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:007', false)
                MainNpc.NpcQuestControl('cFinish')
        case 1:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:002', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:005', false)
                run Yes()
            else:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:008', false)
                MainNpc.NpcQuestControl('cFinish')
        case 2:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:003', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:006', false)
                run Yes()
            else:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:009', false)
                MainNpc.NpcQuestControl('cFinish')
        case 3:
            run TypeD()
        case 4:
            run TypeE()

flow Begin_Ap():
    MainNpc.SetDeliveryQuestInfo()
    MainNpc.SetDeliveryItem(0, true)
    MainNpc.SetNpcName(8, 0)
    switch MainNpc.DeliveryQuestType():
        case 0, 1, 2:
            run NNPC_Approach::Reselection()
        case 3:
            run TypeD()
        case 4:
            run TypeE()

flow Confirm():
    MainNpc.SetNpcName(8, 0)
    switch MainNpc.DeliveryQuestType():
        case 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:201', false)
        case 1:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:202', false)
        case 2:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:203', false)
        case 3:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:204', false)
        case 4:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:205', false)

flow TypeD():
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:101', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:103', false)
        run Yes()
    else:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:105', false)
        MainNpc.NpcQuestControl('cFinish')

flow TypeE():
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:102', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:104', false)
        run Yes()
    else:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:106', false)
        MainNpc.NpcQuestControl('cFinish')

flow Yes():
    MainNpc.NpcDelivery(1, '"Default"')
    if EventFlowSystemActor.EnvHourCompare(18, -1, true, true) == 0:
        MainNpc.QuestStartOpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:108', false, false)
    else:
        MainNpc.QuestStartOpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Begin:109', false, false)
    MainNpc.NpcQuestControl('cStart')
    MainNpc.EventFlags['cNpcMemory:OrderQuest'] = true

