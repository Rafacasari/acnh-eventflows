flow Root():
    EventFlowSystemActor.SetMemoryEventPlayer('cBlancoEventPlayer:PE_Seo_Talk')
    if MainNpc.SeoAppearSide() == 0:
        EventFlowSystemActor.CameraSetDemoParam('SeoTalkLeft', 'cDefault', '', false, false, true, 0)
    else:
        EventFlowSystemActor.CameraSetDemoParam('SeoTalkRight', 'cDefault', '', false, false, true, 0)
    System.EventFlags['cPlayer:SeoFirstmeetingFlag'] = true
    if System.EventFlags['cPlayer:SeoRejectFlag']:
        MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:003', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:002', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:004', false)
        MainNpc.SeoReaction('cDive')
        EventFlowSystemActor.WaitFrame(20)
        EventFlowSystemActor.DeleteTargetItem(2839, 1, false)
        MainNpc.DecideEventReward('cSeoReward')
        EventFlowSystemActor.SetMemoryEventPlayerReward('cBlancoEventPlayer:PE_Seo_GetItem')
        MainNpc.SetEventRewardToPlayerBaggage('cFree')
        MainNpc.SeoReaction('cSurface')
        if System.EventFlags['cPlayer:SeoFirstFlag']:
            MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:006', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:007', false)
            System.EventFlags['cPlayer:SeoFirstFlag'] = true
        System.EventFlags['cPlayer:SeoExchangeItemToday'] = true
        System.EventFlags['cLifeSupportAchievement:GiveScallopsToSeo'] += 1
        MainNpc.NpcSetAIBlackBoard('GiveScallop', 1)
        MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:008', false)
        MainNpc.NpcVoiceEchoOn()
        MainNpc.NpcSelectMessage('cWildCard', '', '', '', 'TalkSNpc/seo/SP_seo_word', '', '', '')
        MainNpc.NpcVoiceEchoOff()
        switch EventFlowSystemActor.RandomChoice3(3):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:020', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:021', false)
            case 2:
                MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:022', false)
        MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:009', true)
        if MainNpc.SeoCanReturnSwim():
            MainNpc.NpcChangeHeadCtrlMode('cNoLook', true)
            MainNpc.SeoMoveCameraOut()
        else:
            MainNpc.SeoReaction('cDive')
        MainNpc.MessageSuspend()
        MainNpc.SeoWarpBuoyOut()
        MainNpc.NpcChangeHeadCtrlMode('cNormal', true)
        run SeoEnd()
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/seo/SP_seo:005', false)
        System.EventFlags['cPlayer:SeoRejectFlag'] = true
        MainNpc.SeoReaction('cDive')
        run SeoEnd()

flow SeoEnd():
    EventFlowSystemActor.BGMPropertyControl(8)

