flow EntryPoint_BestFriend():
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    EventFlowSystemActor.NetCreateSessionVillage('cBestFriend')
    if System.EventFlags['cPlayer:EquipLicenseHelmet']:
        run SNPC_dod_AirPort::LandMakingRemove_Host()
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
    EventFlowSystemActor.OpenVillageGate(false)

flow EntryPoint_Friend():
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    if EventFlowSystemActor.NetHasFriend():
        if not System.EventFlags['cPlayer:MainmenuFriendList']:
            run SNPC_dod_22_Airport_InstallFriendList::Root()
        EventFlowSystemActor.NetCreateSessionVillage('cFriend')
        if System.EventFlags['cPlayer:EquipLicenseHelmet']:
            run SNPC_dod_AirPort::LandMakingRemove_Host()
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
        EventFlowSystemActor.OpenVillageGate(false)
    else:
        EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:220', true)

flow EntryPoint_InetHost():
    if not System.EventFlags['cPlayer:OdekakeFirstInternet']:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:092', true)
        EventFlowSystemActor.OpenMessageWindow('Dialog/DIALOG_Msg:0804', true)
        System.EventFlags['cPlayer:OdekakeFirstInternet'] = true
    MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:130', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        EventFlowSystemActor.MessageSuspend()
        run SNPC_dod_AirPort::EntryPoint_PreProcedure(ContinueAS=true)
        run System_ServerRegistration::UserRegist(WithLogin=true, Terminate=true, WithSave=true)
        run SNPC_dod_AirPort::EntryPoint_PostProcedure()
        if (System.EventFlags['cPlayer:UploadPlayerProfileIllegal']) and (not System.EventFlags['cPlayer:ImprovePlayerProfile']):
            EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:700', true)
        elif EventFlowSystemActor.NetHasAddressData('cBestFriend'):
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:301', false)
            switch EventFlowSystemActor.GeneralTalkChoice4():
                case 0:
                    run EntryPoint_Friend()
                case 1:
                    run EntryPoint_BestFriend()
                case 2:
                    run EntryPoint_Keyword()
                case 3:
                    EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
                    run SNPC_dod_AirPort::EntryPoint_Cancel_Nega()
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:300', false)
            switch EventFlowSystemActor.GeneralTalkChoice3():
                case 0:
                    run EntryPoint_Friend()
                case 1:
                    run EntryPoint_Keyword()
                case 2:
                    EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
                    run SNPC_dod_AirPort::EntryPoint_Cancel_Nega()
    else:
        run SNPC_dod_AirPort::EntryPoint_Cancel_Nega()

flow EntryPoint_Keyword():
    if not System.EventFlags['cPlayer:OdekakeTutorialKeyword']:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:400', false)
        System.EventFlags['cPlayer:OdekakeTutorialKeyword'] = true
    if EventFlowSystemActor.NetHasAddressData('cBestFriend'):
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:402', false)
        switch EventFlowSystemActor.GeneralTalkChoice3():
            case 0:
                run EntryPoint_KeywordOnlyFriend()
            case 1:
                run EntryPoint_KeywordOnlyBestFriend()
            case 2:
                run EntryPoint_KeywordAnybody()
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:401', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run EntryPoint_KeywordOnlyFriend()
        else:
            run EntryPoint_KeywordAnybody()

flow EntryPoint_KeywordAnybody():
    MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:403', false)
    switch EventFlowSystemActor.GeneralTalkChoice3():
        case 0:
            EventFlowSystemActor.NetCreateSessionVillage('cPassword')
            EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
            if System.EventFlags['cPlayer:EquipLicenseHelmet']:
                run SNPC_dod_AirPort::LandMakingRemove_Host()
                MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
            EventFlowSystemActor.OpenVillageGate(false)
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:405', true)
            run SNPC_dod_AirPort::EntryPoint_CheckOpenGateFirst()
        case 1:
            run EntryPoint_KeywordOnlyFriend()
        case 2:
            EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
            run SNPC_dod_AirPort::EntryPoint_Cancel_Nega()

flow EntryPoint_KeywordOnlyBestFriend():
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    EventFlowSystemActor.NetCreateSessionVillage('cPwBestFriend')
    run Event112()

flow EntryPoint_KeywordOnlyFriend():
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    if EventFlowSystemActor.NetHasFriend():
        if not System.EventFlags['cPlayer:MainmenuFriendList']:
            run SNPC_dod_22_Airport_InstallFriendList::Root()
        EventFlowSystemActor.NetCreateSessionVillage('cLimited')
entrypoint Event112:
        EventFlowSystemActor.UIVersionGuideDisappear('cNormal')
        if System.EventFlags['cPlayer:EquipLicenseHelmet']:
            run SNPC_dod_AirPort::LandMakingRemove_Host()
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:122', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120', true)
        EventFlowSystemActor.OpenVillageGate(false)
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:405', true)
    else:
        EventFlowSystemActor.NetEndSessionVillage('cEndVillageSession', false)
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_41_MultiPlayInet:220', true)

