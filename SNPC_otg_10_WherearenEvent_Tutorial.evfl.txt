flow ClothesChk():
    if EventFlowSystemActor.IsWherearenWorkMode():
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:101', false)
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:102', false)
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:103', false)
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:104', true)
        MainNpc.TurnNeck(1, false)
        run Demo_Common_Wherearen::Demo_OfficeOverlookCamera()
        EventFlowSystemActor.WaitFrame(20)
        fork:
            branch:
                MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:105', true)
            branch:
                EventFlowSystemActor.WaitFrame(15)
                SubNpc.CharacterEmoticonAction('Eh', true, '', 0, false)
                EventFlowSystemActor.WaitFrame(30)
                SubNpc.TurnBody(0, 0.0)
        Player.TurnNeck(1, false)
        SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:106', false)
        Player.TurnBody(1, 0.0)
        Npc_2.TurnNeck(1, false)
        SubNpc.TurnNeck(10, false)
        EventFlowSystemActor.WaitFrame(10)
        SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:107', true)
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:108', true)
        EventFlowSystemActor.BGMPropertyControl(191)
        run NnpcEnter()
        EventFlowSystemActor.SystemBGMVolumeChange(-10.0, 0.5, 0, 0.0)
        Npc_3.TurnNeck(0, false)
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:109', true)
        Npc_3.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:110', true)
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:111', true)
        EventFlowSystemActor.BGMPropertyControl(188)
        run TalkAtCounter()
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:051', true)

flow ClothesChk_Init():
    MainNpc.NpcAITalkCastSetting('WherearenPrologue')
    MainNpc.WherearenCustomerEntrySubCast(3, true, false, false, false, false)

flow MncMove():
    SubNpc.TurnBody(10, 0.0)

flow NnpcEnter():
    Npc_3.TurnNeck(11, false)
    Npc_3.NpcAISetting(12, true)
    fork:
        branch:
            EventFlowSystemActor@Sound.EmitDoorSound('cDoorEnter')
            EventFlowSystemActor.BGMPropertyControl(192)
        branch:
            EventFlowSystemActor@Sub.WaitFrame(60)
            Npc_3.NpcEnter('Entrance', 1, 0.0)
        branch:
            EventFlowSystemActor.WaitFrame(20)
            MainNpc.CharacterEmoticonAction('Eh', true, '', 0, false)
            EventFlowSystemActor.WaitFrame(40)
            MainNpc.TurnBody(3, 0.0)
            EventFlowSystemActor.WaitFrame(10)
            Player.TurnBody(3, 0.0)
            SubNpc.TurnNeck(3, false)
            EventFlowSystemActor.WaitFrame(20)
            Npc_2.TurnNeck(3, false)

flow PlayerEnter():
    MainNpc.TurnBody(10, 0.0)
    EventFlowSystemActor.WaitFrame(10)
    MainNpc.CharacterEmoticonAction('Aha', false, '', 0, false)
    EventFlowSystemActor.WaitFrame(25)

flow Root():
    System.EventFlags['cWherearenPlayer:SeqEventReserveInOffice'] = false
    fork:
        branch:
            run PlayerEnter()
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:001', false)
        branch:
            run MncMove()
    MainNpc.TurnNeck(1, false)
    EventFlowSystemActor.WaitFrame(8)
    SubNpc.TurnNeck(0, false)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:001_01', true)
    SubNpc.CharacterEmoticonAction('Smiling', true, '', 0, false)
    EventFlowSystemActor.WaitFrame(40)
    SubNpc.CharacterEmoticonAction('EmotEnd', true, '', 0, false)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:002', false)
    MainNpc.TurnNeck(10, false)
    Player.TurnBody(2, 0.0)
    fork:
        branch:
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:002_01', true)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            SubNpc.TurnNeck(10, false)
    fork:
        branch:
            MainNpc.CharacterEmoticonAction('Clapping', true, '', 0, false)
        branch:
            SubNpc.CharacterEmoticonAction('Clapping', true, '', 0, false)
        branch:
            Npc_2.CharacterEmoticonAction('FaintSmile', true, '', 0, false)
    EventFlowSystemActor.WaitFrame(60)
    fork:
        branch:
            MainNpc.CharacterEmoticonAction('EmotEnd', true, '', 0, false)
        branch:
            SubNpc.CharacterEmoticonAction('EmotEnd', true, '', 0, false)
        branch:
            Npc_2.CharacterEmoticonAction('EmotEnd', true, '', 0, false)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:003', true)
    switch EventFlowSystemActor.GeneralTalkChoice2():
        case 0, 1:
            EventFlowSystemActor.WaitFrame(15)
            fork:
                branch:
                    SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:004', true)
                branch:
                    EventFlowSystemActor.WaitFrame(15)
                    Player.TurnNeck(1, false)
            MainNpc.TurnNeck(10, false)
            fork:
                branch:
                    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:005', true)
                branch:
                    EventFlowSystemActor.WaitFrame(15)
                    Player.TurnNeck(0, false)
            Player.TurnNeck(1, false)
            fork:
                branch:
                    SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:006', true)
                branch:
                    EventFlowSystemActor.WaitFrame(10)
                    MainNpc.TurnNeck(1, false)
                    MainNpc.CharacterEmoticonAction('FaintSmile', false, '', 0, false)
                    Npc_2.TurnNeck(1, false)
            Npc_2.CharacterEmoticonAction('FaintSmile', false, '', 0, false)
            EventFlowSystemActor.WaitFrame(40)
            SubNpc.CharacterEmoticonAction('EmotEnd', false, '', 0, false)
            MainNpc.TurnNeck(2, false)
            fork:
                branch:
                    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:008', true)
                branch:
                    EventFlowSystemActor.WaitFrame(20)
                    Npc_2.CharacterEmoticonAction('Eh', false, '', 0, false)
                    EventFlowSystemActor.WaitFrame(30)
                    Player.TurnNeck(2, false)
                    Npc_2.CharacterEmoticonAction('EmotEnd', false, '', 0, false)
                    Npc_2.TurnNeck(10, false)
            Player.TurnNeck(2, false)
            EventFlowSystemActor.WaitFrame(15)
            Npc_2.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:007', true)
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:009', true)
            SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:010', true)
            Npc_2.CharacterEmoticonAction('Smiling', false, '', 0, false)
            EventFlowSystemActor.WaitFrame(60)
            run UniformGuidance()

flow Root_Init():
    MainNpc.NpcAITalkCastSetting('WherearenPrologue')

flow Root_StartingSalary():
    run SNPC_otg_01_WherearenOffice::HouseCompleteActing()
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:201', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:202', true)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:203', true)
    SubNpc.TurnNeck(0, false)
    fork:
        branch:
            SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:204', true)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            MainNpc.TurnNeck(1, false)
            Player.TurnNeck(1, false)
    MainNpc.TurnNeck(10, false)
    fork:
        branch:
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:205', false)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Player.TurnNeck(0, false)
            EventFlowSystemActor.WaitFrame(15)
            Npc_2.TurnNeck(0, false)
    MainNpc.TurnNeck(1, false)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:206', true)
    Player.TurnNeck(1, false)
    fork:
        branch:
            SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:207', false)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Npc_2.TurnNeck(1, false)
    SubNpc.TurnNeck(10, false)
    SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:208', true)
    run Demo_Common_Wherearen::Demo_Mnc_ExitOffice()
    MainNpc.TurnBody(10, 0.0)
    Player.TurnNeck(0, false)
    fork:
        branch:
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:211', true)
        branch:
            EventFlowSystemActor.WaitFrame(20)
            Npc_2.TurnNeck(0, false)
    run Demo_Common_Wherearen::SetSalaryAsDeliveryItem()
    MainNpc.NpcDelivery(1, 'Keep')
    EventFlowSystemActor.WherearenDecideSalary()
    EventFlowSystemActor.WherearenUnreceivedPayTagSet(0)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:212', false)
    switch EventFlowSystemActor.GeneralTalkChoice2():
        case 0, 1:
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:213', true)
            EventFlowSystemActor.UIPokiAppear()
            MainNpc.NpcDelivery(2, 'Default')
            EventFlowSystemActor.WherearenReceiveSalary()
            EventFlowSystemActor.WaitFrame(40)
            EventFlowSystemActor.UIPokiDisappear()
            EventFlowSystemActor.WaitFrame(10)
            Npc_2.TurnNeck(10, false)
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:214', true)
            Npc_2.CharacterEmoticonAction('FaintSmile', true, '', 0, false)
            EventFlowSystemActor.WaitFrame(20)
            System.EventFlags['cWherearenPlayer:OtgGetStartingSalary'] = true
            System.EventFlags['cPlayer:UnlockCatalogPokiBag'] = true
            System.EventFlags['cWherearenPlayer:MncMovetoBridge'] = true
            System.EventFlags['cPlayer:OtgTipsComplete1stOrder'] = true
            SubflowResults[3] = 0
            run SNPC_otg_01_WherearenOffice::OrderClose_Complete()
            run SNPC_otg_01_WherearenOffice::Otg_ReturnHomePos()

flow Root_StartingSalary_Init():
    MainNpc.NpcAITalkCastSetting('WherearenPrologue')

flow TalkAtCounter():
    run Demo_Common_Wherearen::Demo_OfficeSetCounterPosition()
    EventFlowSystemActor.BGMPropertyControl(190)
    EventFlowSystemActor.SystemBGMVolumeReset(0.10000000149011612, 0, 0.0)
    EventFlowSystemActor.BGMPropertyControl(189)
    Npc_3.SetNpcName(0, 0)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:111_01', true)
    Npc_3.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:112', false)
    Npc_3.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:113', true)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:114', false)
    MainNpc.TurnNeck(10, false)
    fork:
        branch:
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:115', false)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Npc_3.TurnNeck(10, false)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:116', true)
    EventFlowSystemActor.SystemBGMVolumeFadeOut(0.5, 0, 0.0)
    MainNpc.CharacterEmoticonAction('FaintSmile', true, '', 0, true)
    EventFlowSystemActor.WaitFrame(15)
    System.EventFlags['cWherearenPlayer:SeqUniformTutorialOngoing'] = false
    System.EventFlags['cWherearenPlayer:SeqFirstEditOngoing'] = true
    Npc_3.WherearenTakeOnNpcOrder('cNewHouse', '', '', '', '')
    EventFlowSystemActor.WherearenOrderCallback('cStart')
    EventFlowSystemActor.CameraReserveFirstStateCommand('Demo:OrderCut0', '', true)
    EventFlowSystemActor.RequestWaterFallDucking(1)
    EventFlowSystemActor.BGMPropertyControl(187)
    EventFlowSystemActor.SoundTriggerEmit('Demo_Oshigoto_Wipe', -1)
    EventFlowSystemActor.WaitFrame(6)
    EventFlowSystemActor.NextLPFadeTime(0.7300000190734863)
    EventFlowSystemActor.SoundSceneChangeFadeOutDucking(10)
    EventFlowSystemActor.SystemRequestChangeStage('cWherearenFirstOrderDemo', 'cOrderWherearen', 'cOrderWherearen', 'cBlack', 1.0, 1.0)

flow UniformGuidance():
    run `00_Demo_Fade`::FadeOut_Cmn(FadeType='cCircle', FadeColor='cBlack', FadeSpeed='cNormal', SoundDucking='cWorldDucking')
    SubNpc.CharacterEmoticonAction('EmotEnd', false, '', 0, false)
    Npc_2.CharacterEmoticonAction('EmotEnd', false, '', 0, false)
    MainNpc.CharacterEmoticonAction('EmotEnd', false, '', 0, false)
    EventFlowSystemActor.SetupActorPosition(15)
    Player.TurnBody(0, 0.0)
    EventFlowSystemActor.WaitFrame(40)
    EventFlowSystemActor.StoreNormalCamera(true, '')
    MainNpc.TalkCamera(false, 'cTalk', 0)
    run `00_Demo_Fade`::FadeIn_Cmn(IsWait=true)
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_03_WherearenTutorials:011', true)
    System.EventFlags['cWherearenPlayer:Unlock_NPC_00'] = true
    System.EventFlags['cWherearenPlayer:Unlock_NPC_01'] = true
    System.EventFlags['cWherearenPlayer:TutorialDone'] = true
    System.EventFlags['cWherearenPlayer:SeqUniformTutorialOngoing'] = true
    EventFlowSystemActor.SetWherearenPlayerRemoveBinderSeq(true, false)

