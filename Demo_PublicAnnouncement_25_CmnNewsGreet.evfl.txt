flow FishAutumn():
    if System.EventFlags['cLand:FishFesFinished']:
        switch EventFlowSystemActor.EventCheck('FishingConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_03_01', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_03_02', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        run Fish_1st()

flow FishSpring():
    if System.EventFlags['cLand:FishFesFinished']:
        switch EventFlowSystemActor.EventCheck('FishingConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_01_01', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_01_02', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        run Fish_1st()

flow FishSummer():
    if System.EventFlags['cLand:FishFesFinished']:
        switch EventFlowSystemActor.EventCheck('FishingConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_02_01', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_02_02', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        run Fish_1st()

flow FishWinter():
    if System.EventFlags['cLand:FishFesFinished']:
        switch EventFlowSystemActor.EventCheck('FishingConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_04_01', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_04_02', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        run Fish_1st()

flow Fish_1st():
    switch EventFlowSystemActor.EventCheck('FishingConvention'):
        case 0:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_00_01', false)
        case 1:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:005_00_02', false)
            System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
        default:
            return

flow Greet_Carnival():
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_11_01', false)
    System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
    System.EventFlags['cPlayer:AnnounceCarnival'] = true

flow Greet_Easter():
    System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
    System.EventFlags['cPlayer:AnnounceEaster'] = true
    if SubflowResults@2[0] == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:041_03', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_01_03', false)

flow Greet_Fireworks():
    if SubflowResults@2[0] == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:046', false)
    elif not System.EventFlags['cPlayer:PAnnounceFireworksSza1']:
        System.EventFlags['cPlayer:PAnnounceFireworksSza1'] = true
        switch EventFlowSystemActor.EventCheck('Fireworks'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_03', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_04', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    elif EventFlowSystemActor.FirstFireworksFes():
        switch EventFlowSystemActor.EventCheck('Fireworks'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_05', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_06', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    elif EventFlowSystemActor.FinalFireworksFes():
        switch EventFlowSystemActor.EventCheck('Fireworks'):
            case 0:
                if EventFlowSystemActor.EnvWeatherArea() == `cWeatherArea_North`:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_09', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_11', false)
            case 1:
                if EventFlowSystemActor.EnvWeatherArea() == `cWeatherArea_North`:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_10', false)
                    System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_12', false)
                    System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        switch EventFlowSystemActor.EventCheck('Fireworks'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_07', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_06_08', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return

flow Greet_Halloween():
    switch EventFlowSystemActor.EventCheck('Halloween'):
        case 0:
            if SubflowResults@2[0] == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:048_04', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_08_04', false)
                run Sub_Event120()
        case 1:
            System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            if SubflowResults@2[0] == 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:048_05', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_08_05', false)
                run Sub_Event120()
        case 2:
            run Sub_Event120()
        default:
            return

flow Greet_Thanksgiving():
    switch EventFlowSystemActor.EventCheck('HarvestFestival'):
        case 0:
            if EventFlowSystemActor.EnvWeatherArea() == `cWeatherArea_North`:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_09_01', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_09_02', false)
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_09_05', false)
            run Sub_Event133()
        case 1:
            if EventFlowSystemActor.EnvWeatherArea() == `cWeatherArea_North`:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_09_03', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_09_04', false)
            if System.EventFlags['cLand:HarvestProgress'] < 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_09_05', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_09_06', false)
            System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            run Sub_Event133()
        default:
            return

flow Greet_XmasEve():
    System.EventFlags['cPlayer:AnnounceChristmasEve'] = true
    if SubflowResults@2[0] == 0:
        if EventFlowSystemActor.EnvHourCompare(0, 0, true, true) == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:049_00_01', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:049_00_02', false)
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:049_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:008_10_04', false)
        if EventFlowSystemActor.CurrentRegionLanguage('cCurrentMachine') == 0:
            SubflowResults[15] = 0

flow Insect1():
    if System.EventFlags['cLand:InsectFesFinished']:
        switch EventFlowSystemActor.EventCheck('InsectConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_01_01', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_01_02', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        run Insect_1st()

flow Insect2():
    if System.EventFlags['cLand:InsectFesFinished']:
        switch EventFlowSystemActor.EventCheck('InsectConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_02_01', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_02_02', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        run Insect_1st()

flow Insect3():
    if not System.EventFlags['cLand:InsectFesFinished']:
        run Insect_1st()
    elif System.EventFlags['cLand:CountOfficeAfterBuild'] < 365:
        switch EventFlowSystemActor.EventCheck('InsectConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_04_03', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_04_04', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        switch EventFlowSystemActor.EventCheck('InsectConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_03_01', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_03_02', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return

flow Insect4():
    if System.EventFlags['cLand:InsectFesFinished']:
        switch EventFlowSystemActor.EventCheck('InsectConvention'):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_04_01', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_04_02', false)
                System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
            default:
                return
    else:
        run Insect_1st()

flow Insect_1st():
    switch EventFlowSystemActor.EventCheck('InsectConvention'):
        case 0:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_00_01', false)
        case 1:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006_00_02', false)
            System.EventFlags['cLand:TownNewsHeardEventStarted'] = true
        default:
            return

flow NewYearEve():
    if EventFlowSystemActor.EventCheck('Countdown') in (0, 1):
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:007_01', false)

flow NewYearEveHurry():
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:007_02', false)

flow Rco_Greet_Snow():
    run Event89()

flow Root():
    if SubflowResults@2[0] == 0:
        switch SubflowResults@8[1]:
            case 0, 1, 2, 3, 4:
                if MainNpc.EnvPublicAnnouncement('cEnvAnnounceQueryType_FirstSnow'):
entrypoint Event89:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:005', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:001', false)
            case 5:
                if MainNpc.EnvPublicAnnouncement('cEnvAnnounceQueryType_FirstSnow'):
                    run Rco_Greet_Snow()
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:002', false)
            case 6:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:003', false)
            case 7:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:004', false)
        if not System.EventFlags['cLand:OfficeConstruction1']:
            switch SubflowResults@8[21]:
                case 2:
                    run Greet_Easter()
                case 3:
                    run Greet_Fireworks()
                case 4:
                    run Greet_Halloween()
                case 6:
                    run Greet_XmasEve()
                default:
                    return
        elif System.EventFlags['cPlayer:PAnnounceHeardOfficeRenual']:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:003_01', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:003_02', false)
    else:
        switch SubflowResults@10[1]:
            case 0, 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:001_01', false)
            case 2, 3:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:001_02', false)
            case 4:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:001_03', false)
            case 5:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:002', false)
            case 6:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:003', false)
            case 7:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:004', false)
            case 8:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:006', false)
            case 9:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:007', false)
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:001', false)
        switch SubflowResults@8[21]:
            case 0:
                switch SubflowResults@9[2]:
                    case 1:
                        run FishSpring()
                        SubflowResults[15] = 1
                    case 2:
                        run FishSummer()
                        SubflowResults[15] = 1
                    case 3:
                        run FishAutumn()
                        SubflowResults[15] = 1
                    case 4:
                        run FishWinter()
                        SubflowResults[15] = 1
                    case 5:
                        run Insect1()
                        SubflowResults[15] = 1
                    case 6:
                        run Insect2()
                        SubflowResults[15] = 1
                    case 7:
                        run Insect3()
                        SubflowResults[15] = 1
                    case 8:
                        run Insect4()
                        SubflowResults[15] = 1
                    default:
                        return
            case 1:
                run Greet_Carnival()
                SubflowResults[15] = 1
            case 2:
                run Greet_Easter()
                SubflowResults[15] = 1
            case 3:
                run Greet_Fireworks()
                SubflowResults[15] = 1
            case 4:
                run Greet_Halloween()
                SubflowResults[15] = 1
            case 5:
                run Greet_Thanksgiving()
                SubflowResults[15] = 1
            case 6:
                run Greet_XmasEve()
                SubflowResults[15] = 1
            case 7:
                run NewYearEve()
                SubflowResults[15] = 1

local flow Sub_Event120():
    System.EventFlags['cPlayer:AnnounceHalloween'] = true
    System.EventFlags['cPlayer:AnnounceHalloween2'] = true

local flow Sub_Event133():
    System.EventFlags['cPlayer:AnnounceHarvest'] = true
    System.EventFlags['cPlayer:AnnounceHarvest2'] = true

