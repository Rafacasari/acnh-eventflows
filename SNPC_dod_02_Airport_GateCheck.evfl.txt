flow Dod_ChangeGate():
    if EventFlowSystemActor.IsVillageGateOpened():
        run Dod_CloseGate()
    else:
        run Dod_OpenGate()

flow Dod_CloseGate():
    MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:802', true)
    run SNPC_dod_AirPort::EntryPoint_PreProcedure(ContinueAS=true)
    EventFlowSystemActor.NetCloseSession('cCloseSession', false)
    run SNPC_dod_AirPort::EntryPoint_PostProcedure()
    EventFlowSystemActor.CloseVillageGate()
    EventFlowSystemActor.WaitFrame(10)
    MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:252', true)
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')

flow Dod_OpenGate():
    MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:802', true)
    run SNPC_dod_AirPort::EntryPoint_PreProcedure(ContinueAS=true)
    EventFlowSystemActor.NetOpenSession('cOpenSession', false)
    run SNPC_dod_AirPort::EntryPoint_PostProcedure()
    EventFlowSystemActor.OpenVillageGate(false)
    EventFlowSystemActor.WaitFrame(10)
    MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:262', true)
    EventFlowSystemActor.UIVersionGuideDisappear('cNormal')

flow EntryPoint_GateCheck():
    if EventFlowSystemActor.IsVillageGateOpened():
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:306', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run Dod_CloseGate()
        else:
            run SNPC_dod_AirPort::EntryPoint_Cancel()
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:305', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run Dod_OpenGate()
        else:
            run SNPC_dod_AirPort::EntryPoint_Cancel()

