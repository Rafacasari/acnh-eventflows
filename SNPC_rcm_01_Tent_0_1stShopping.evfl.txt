flow Rcm_Tent1stShoppingAgain():
    EventFlowSystemActor.UIShopBuyAppear('cMamekichi')
    if EventFlowSystemActor.UIResultMenuDecide():
        run SNPC_rcm_00_Common::CmnCloseShoppingUI()
        MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:006', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:008', false)
            run Rcm_Tent1stShoppingEnd()
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:007', false)
            run Rcm_Tent1stShoppingAgain()
    else:
        run SNPC_rcm_00_Common::CmnCloseShoppingUI()
        MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:004', false)
        run Rcm_Tent1stShoppingEnd()

flow Rcm_Tent1stShoppingEnd():
    MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:005', false)
    EventFlowSystemActor.UIMoneyDisappear()

flow Root():
    System.EventFlags['cPlayer:RcmTalked1stAfterPrologue'] = true
    if System.EventFlags['cLand:TodayStartTown1P']:
        MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:001_01', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:001_02', false)
    MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:002', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:003_02', false)
        EventFlowSystemActor.UIMoneyAppear()
        run Rcm_Tent1stShoppingAgain()
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_01_TentCommon:003_01', false)
        run Rcm_Tent1stShoppingEnd()

