flow Commentary_End():
    MainNpc.NpcDelivery(2, '"Default"')
    run SNPC_owl_00_Common::Again()

flow Root():
    if System.EventFlags['cPlayer:FutaHeardCommentary']:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:302', true)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:301', true)
    if System.EventFlags['cPlayer:OwlShowDiveFishReport']:
        if System.EventFlags['cPlayer:Owl1stTalkMuseum2']:
            EventFlowSystemActor.UIItemSelectWindowHandling('cItemFilter', 65534, '', 'OwlCommentary3', 'cItemSelect', false)
        else:
            EventFlowSystemActor.UIItemSelectWindowHandling('cItemFilter', 65534, '', 'OwlCommentary2', 'cItemSelect', false)
    else:
        if System.EventFlags['cPlayer:Owl1stTalkMuseum2']:
            EventFlowSystemActor.UIItemSelectWindowHandling('cItemFilter', 65534, '', 'OwlCommentary1', 'cItemSelect', false)
        else:
            EventFlowSystemActor.UIItemSelectWindowHandling('cItemFilter', 65534, '', 'OwlCommentary', 'cItemSelect', false)
    if EventFlowSystemActor.UIResultMenuDecide():
        MainNpc.SetDeliveryItem(4, false)
        EventFlowSystemActor.SetTagFromUIResult('cItemName', 0)
        System.EventFlags['cPlayer:FutaHeardCommentary'] = true
        MainNpc.NpcDelivery(14, 'Keep')
        switch MainNpc.OwlDonationItemType():
            case `Insect`:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:304', false)
                MainNpc.OwlOpenItemMessage()
                if MainNpc.OwlIsDonation('cUISelect'):
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:352', false)
                    run Commentary_End()
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:353', false)
                    run Commentary_End()
            case `FossilUnknown`:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:308', false)
                if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:310', false)
                    run SNPC_owl_02_Museum_Judgment::Fossil_Check()
                    run Sub_Event148()
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:309', false)
                    run Commentary_End()
            case `Fossil`:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:313', false)
                run Sub_Event148()
            case `FishOrDiveFish`:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:306', false)
                MainNpc.OwlOpenItemMessage()
                if MainNpc.OwlIsDonation('cUISelect'):
                    switch EventFlowSystemActor.MuseumLevel():
                        case `BlathersTent`:
                            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:366', false)
                            run Commentary_End()
                        case `BlathersMuseumNoArt`, `BlathersMuseumArt`, `BlathersCafe`:
                            MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:367', false)
                            run Commentary_End()
                        default:
                            return
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:368', false)
                    run Commentary_End()
            case `PictureOrSculpture`:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:306', false)
                if MainNpc.OwlIsDonation('cUISelect'):
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:315', false)
                else:
                    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:316', false)
                run Commentary_End()
            case `PictureFakeOrSculptureFake`:
                System.EventFlags['cLifeSupportAchievement:DonateFake'] = true
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:307', false)
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:351', false)
                run Commentary_End()
            default:
                return
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:303', true)

local flow Sub_Event148():
    MainNpc.OwlOpenItemMessage()
    MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:361', false)
    switch EventFlowSystemActor.MuseumLevel():
        case `BlathersTent`:
            if MainNpc.OwlIsDonation('cUISelect'):
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:362', true)
                run Commentary_End()
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:364', true)
                run Commentary_End()
        case `BlathersMuseumNoArt`, `BlathersMuseumArt`, `BlathersCafe`:
            if MainNpc.OwlIsDonation('cUISelect'):
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:363', true)
                run Commentary_End()
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/owl/SP_owl_00_Common:364', true)
                run Commentary_End()
        default:
            return

