flow Hgc_Chk_Closeness():
    if System.EventFlags['cPlayer:KotonoQuestCount'] < 20:
        SubflowResults[0] = 0
    elif System.EventFlags['cPlayer:KotonoQuestCount'] < 50:
        SubflowResults[0] = 1
    else:
        SubflowResults[0] = 2

flow Root():
    if EventFlowSystemActor.IsMyVillage():
        run Hgc_Chk_Closeness()
        EventFlowSystemActor.SetTagFromSystem('cFashionTheme', 'cDegit', 0, 0, '')
        if System.EventFlags['cPlayer:KotonoQuestClearFlag']:
            run SNPC_hgc_02_AfterQuest::Root()
        elif System.EventFlags['cPlayer:KotonoQuestStartFlag']:
            run SNPC_hgc_01_NowQuest::Root()
        else:
            run SNPC_hgc_00_BeforeQuest::Root()
    else:
        switch EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:150', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:151', false)
            case 2:
                MainNpc.OpenMessageWindow('TalkSNpc/hgc/SP_hgc:152', false)

