flow Hgh_MyDesign_JustLooking():
    MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:005', false)

flow Hgh_Mydesign_Get():
    MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:006', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:009', false)
        if MainNpc.HghFreeQuery2('cHghQueryType_CheckMyDesignIsPro'):
            EventFlowSystemActor.UIMyDesignSelectHandling(1, 2, 0, 0, 0)
        else:
            EventFlowSystemActor.UIMyDesignSelectHandling(1, 1, 0, 0, 0)
        if EventFlowSystemActor.UIResultMenuDecide():
            EventFlowSystemActor.SoundTriggerEmit('Copy_Design', -1)
            MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:010', false)
            MainNpc.HghFreeAction('cHghActionType_UpdateHoldMyDesignReplace')
            if MainNpc.HghFreeQuery2('cHghQueryType_CheckMyDesignIsPro'):
                run hgh_PRO()
            else:
                run Hgh_Mydesign_RefreshChk()
        else:
            run hgh_Cancel()
    else:
        run hgh_Cancel()

flow Hgh_Mydesign_Not_Report_Select():
    switch MainNpc.HghMydesignOwner():
        case 0:
            MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:002', false)
        case 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:003', false)
        case 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:004', false)
    switch EventFlowSystemActor.GeneralTalkChoice3():
        case 0:
            run Hgh_Mydesign_Get()
            return
        case 1:
entrypoint Event62:
            if MainNpc.HghFreeQuery2('cHghQueryType_HasDisplayMyDesign'):
                MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:021', false)
                EventFlowSystemActor.UIMyDesignSelectHandling(0, 0, 4, 1, 1)
                if EventFlowSystemActor.UIResultMenuDecide():
                    EventFlowSystemActor.SetTagFromUIResult('cMyDesignTitle', 1)
                    MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:022', false)
                    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                        if MainNpc.HghFreeQuery2('cHghQueryType_UISelectMyDesignIsPro'):
                            if MainNpc.HghFreeQuery2('cHghQueryType_CheckMyDesignIsPro'):
                                run hgh_Change()
                                run hgh_PRO()
                            else:
                                run hgh_Overwrite()
                                run Hgh_Mydesign_RefreshChk()
                        elif MainNpc.HghFreeQuery2('cHghQueryType_CheckMyDesignIsPro'):
                            run hgh_Overwrite()
                            run hgh_PRO()
                        else:
                            run hgh_Change()
                            run Hgh_Mydesign_RefreshChk()
                        return
                    else:
                        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:024', false)
                        MainNpc.HghFreeAction('cHghActionType_UpdateShopMyDesign')
                        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:026', false)
                else:
                    run hgh_Cancel()
                    return
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:020', false)
                return
        case 2:
            run Hgh_MyDesign_JustLooking()
            return

flow Hgh_Mydesign_RefreshChk():
    if EventFlowSystemActor.OverwriteEquipedMyDesign():
        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:051', false)

flow Hgh_Mydesign_Report_Select():
    switch MainNpc.HghMydesignOwner():
        case 1:
            MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:003_01', false)
            run Sub_grp_Event1()
        case 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:004_01', false)
            run Sub_grp_Event1()
        default:
            return

flow Hgh_Mydesign_Show():
    run Event62()

flow Hgh_Talk():
    MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:001', false)
    switch EventFlowSystemActor.GeneralTalkChoice4():
        case 0:
            MainNpc.NpcAddBlackBoard('CheckMyDesign', 4)
            run Sub_Event31()
        case 1:
            run Sub_Event31()
        case 2:
            MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:000', false)
        case 3:
            MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:005', false)

flow Root():
    EventFlowSystemActor.UIShopMoneyDisappear()
    run Hgh_Talk()
    EventFlowSystemActor.UIMoneyAppear()

local flow Sub_Event31():
    MainNpc.ShopCheckItemSet('CheckMyDesign', 'cTailor')
    MainNpc.CameraForWallHangingMyDesign()
    EventFlowSystemActor.SetTagFromSystem('cTailorMyDesignDesignName', 'cDegit', 0, 0, '')
    switch MainNpc.HghMydesignOwner():
        case 0:
            run Hgh_Mydesign_Not_Report_Select()
        case 1:
            run Sub_Event50()
        case 2:
            EventFlowSystemActor.SetTagFromSystem('cTailorMyDesignLandName', 'cDegit', 0, 0, '')
            run Sub_Event50()

local flow Sub_Event50():
    EventFlowSystemActor.SetTagFromSystem('cTailorMyDesignPlayerName', 'cDegit', 0, 0, '')
    if not EventFlowSystemActor.NetHasPOPID(false):
        run Hgh_Mydesign_Not_Report_Select()
    elif MainNpc.HghFreeQuery2('cHghQueryType_CheckMyDesignIsTailorDefault'):
        run Hgh_Mydesign_Not_Report_Select()
    else:
        run Hgh_Mydesign_Report_Select()

local flow Sub_grp_Event1():
    switch EventFlowSystemActor.GeneralTalkChoice4():
        case 0:
            run Hgh_Mydesign_Get()
        case 1:
            run Hgh_Mydesign_Show()
        case 2:
            EventFlowSystemActor.NetCaptureScreenshot()
            EventFlowSystemActor.UIIllegalReportHandling(1)
            if EventFlowSystemActor.UIIllegalReportResult():
                MainNpc.HghRevertToTailorDefault()
                MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:040', false)
            else:
                run hgh_Cancel()
        case 3:
            run Hgh_MyDesign_JustLooking()

flow hgh_Cancel():
    MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:008', false)
    EventFlowSystemActor.UIMoneyAppear()
    EventFlowSystemActor.ExitFlowchart()

flow hgh_Change():
    MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:025', false)
    MainNpc.HghFreeAction('cHghActionType_ExchangeMyDesign')
    MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:026', false)

flow hgh_Overwrite():
    MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:027', false)
    if MainNpc.HghFreeQuery2('cHghQueryType_CheckMyDesignIsPro'):
        EventFlowSystemActor.UIMyDesignSelectHandling(1, 2, 0, 0, 0)
    else:
        EventFlowSystemActor.UIMyDesignSelectHandling(1, 1, 0, 0, 0)
    if EventFlowSystemActor.UIResultMenuDecide():
        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:025', false)
        MainNpc.HghFreeAction('cHghActionType_UpdateHoldMyDesignReplace')
        MainNpc.HghFreeAction('cHghActionType_UpdateShopMyDesign')
        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:026', false)
    else:
        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:028', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run hgh_Cancel()
        else:
            run hgh_Overwrite()

flow hgh_PRO():
    if (not System.EventFlags['cPlayer:MainmenuUnlockMydesingPro']) and (not System.EventFlags['cPlayer:KinuyoPROdesginFlag']):
        System.EventFlags['cPlayer:KinuyoPROdesginFlag'] = true
        MainNpc.TalkCamera(true, 'cTalk', 0)
        Player.TurnBody(0, 0.0)
        Player.PlayerWaitTurn()
        Player.TurnNeck(0, false)
        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:030', false)
        MainNpc.OpenMessageWindow('TalkSNpc/hgh/SP_hgh_10_Mydesign:031', false)
    else:
        run Hgh_Mydesign_RefreshChk()

