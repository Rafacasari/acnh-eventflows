local flow Sub_Event18():
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:1303', false)
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:1304', false)
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:1305', false)

flow TownNews_Heard1stTime():
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:001_01', false)
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:001_02', false)
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:001_03', false)
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:001_04', false)
    if (System.EventFlags['cPlayer:ThisPCcreatedbeforeOfficeUpgrading']) and (not System.EventFlags['cPlayer:RcoOfficeBuiltLetter']):
        run Demo_PublicAnnouncement_Process::PostRcoLetter105()
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:001_05', true)
    EventFlowSystemActor.WaitFrame(20)
    run Demo_PublicAnnouncement_00_Cmn::Root()

flow TownNews_KK1stLive():
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:302', false)
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:303', true)

flow TownNews_StartKppTour():
    if SubflowResults@3[20] in (1, 2):
        if SubflowResults@2[14] == 0:
            if SubflowResults@4[18] not in (0, 1):
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:1301_02', false)
        else:
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:1301_01', false)
        SubflowResults[14] = 1
        switch SubflowResults@3[20]:
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:1302_01', false)
                run Sub_Event18()
            case 2:
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:1302_02', false)
                run Sub_Event18()
            default:
                return

