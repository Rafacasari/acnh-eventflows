flow BeeFace_GetMedicineRecipe():
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:011', false)
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:012', true)
    MainNpc.NpcSetRewardRecipe(2777, false)
    MainNpc.SetDeliveryItem(1, true)
    MainNpc.NpcDelivery(1, 'Keep')
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:013', false)
    MainNpc.NpcDelivery(2, 'Default')
    System.EventFlags['cPlayer:GotMedicineRecipe'] = true

flow BeeFace_NormalTalk():
    run Event3()

flow Medicine():
    MainNpc.SetDeliveryItemAtRandom(2777, true, 'cVillageRemakePattern', 0)
    if (EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') >= 1) and (MainNpc.NpcIsSitting() not in (0, 1, 2, 3, 5)) and (MainNpc.CheckNpcFavorLevel() in (0, 1, 2, 3, 4)):
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:006', false)
        MainNpc.NpcDelivery(1, 'Default')
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:007', false)
    else:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:005', false)

flow Root():
    if not ((not System.EventFlags['cPlayer:PlayerStungByBee']) or (MainNpc.EventFlags['cNpcMemory:TalkBeefaceToday']) or (EventFlowSystemActor.SystemIsCanNotLookFace())):
        if System.EventFlags['cPlayer:GotMedicineRecipe']:
entrypoint Event3:
            switch EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
                case 0:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:001', false)
                    run Sub_Event6()
                case 1:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/React/BO_React_Beeface:002', false)
                    run Sub_Event6()
                case 2:
                    run Medicine()
                    run Sub_Event6()
        elif (EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') >= 1) and (MainNpc.NpcIsSitting() not in (0, 1, 2, 3, 5)) and (System.EventFlags['cPlayer:MainmenuRecipe']):
            run BeeFace_GetMedicineRecipe()
            run Sub_Event6()
        else:
            run BeeFace_NormalTalk()

local flow Sub_Event6():
    MainNpc.EventFlags['cNpcMemory:TalkBeefaceToday'] = true
    MainNpc.EventFlags['cNpcMemory:AcquaintanceshipFlagOff'] = true
    EventFlowSystemActor.ExitFlowchart()

