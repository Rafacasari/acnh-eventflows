flow Root():
    SubNpc.NpcWaitTalkPrepare()
    SubNpc.TurnBody(10, 0.0)
    if EventFlowSystemActor.EnvHourCompare(0, -1, true, true) != 0:
        MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:005', false)
    elif not System.EventFlags['cPlayer:AlwCommuneTalkBeforeFlag']:
        if System.EventFlags['cPlayer:TalkAlpCommuneOpenEvent']:
            MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:011', false)
        else:
            if System.EventFlags['cPlayer:AlwJuneBrideTalkBeforeFlag']:
                MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:010', false)
            else:
                MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:009', false)
        System.EventFlags['cPlayer:AlwCommuneTalkBeforeFlag'] = true
        System.EventFlags['cPlayer:DoneCommuneAlpOpenEvent'] = true
        System.EventFlags['cPlayer:AlwJuneBrideTalkBeforeFlag'] = true
    elif System.EventFlags['cPlayer:AlwCommuneTalkTodayFlag']:
        switch EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
            case 0:
                MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:006', false)
            case 1:
                MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:007', false)
            case 2:
                MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:008', false)
    else:
        switch EventFlowSystemActor.EnvTimeZone():
            case `05:00-07:59`, `08:00-11:59`:
                MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:002', false)
            case `12:00-15:59`, `16:00-18:59`:
                MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:003', false)
            case `19:00-23:59`, `00:00-04:59`:
                MainNpc.OpenMessageWindow('TalkSNpc/alw/SP_alw_02_Commune:004', false)
        System.EventFlags['cPlayer:AlwCommuneTalkTodayFlag'] = true

flow Root_Init():
    MainNpc.NpcAITalkSubCastEntry('alp', 1)

