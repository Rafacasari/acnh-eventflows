flow CampSitePlate_0():
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:005', false)

flow CampSitePlate_1():
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:006', false)

flow ImmQBoard(ItemPrice: int = 0):
    System.EventFlags['cPlayerTemp:ImmQPutInFtrNum'] = 0
    switch GeneralObject.SettlerQuest():
        case 1:
            if System.EventFlags['cLand:ImmQ_A_Complete']:
                run ImmQBoard_Clear(TagType='cReserveHouseSettlerA')
            else:
                EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:101_01', false)
                run Sub_grp_Event34(ItemPrice=ItemPrice)
        case 2:
            if System.EventFlags['cLand:ImmQ_B_Complete']:
                run ImmQBoard_Clear(TagType='cReserveHouseSettlerB')
            else:
                EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:101_02', false)
                run Sub_grp_Event34(ItemPrice=ItemPrice)
        case 3:
            if System.EventFlags['cLand:ImmQ_C_Complete']:
                run ImmQBoard_Clear(TagType='cReserveHouseSettlerC')
            else:
                EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:101_03', false)
                run Sub_grp_Event34(ItemPrice=ItemPrice)
        default:
            return

flow ImmQBoard_Clear(TagType: str):
    GeneralObject.SetTagFromSystem(TagType, '"cDegit"', 0, 0, '""')
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:103', false)

flow Market_Reserve():
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:007', false)

flow Museum_Moving():
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:008_01', false)

flow Museum_Reserve():
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:008', false)

flow NpcHousePlate():
    GeneralObject.SetTagFromSystem('cNpcNameplate', '"cDegit"', 0, 0, '""')
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:001', false)

flow NpcHouse_Moving():
    GeneralObject.SetTagFromSystem('cNpcNameplate', '"cDegit"', 0, 0, '""')
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:003_01', false)

flow NpcTentPlate():
    GeneralObject.SetTagFromSystem('cNpcNameplate', '"cDegit"', 0, 0, '""')
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:001_01', false)

flow PlayerHouse_Moving():
    GeneralObject.SetTagFromSystem('cPlayerNameplate', '"cDegit"', 0, 0, '""')
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:021', false)

flow Property_0_Selling():
    if EventFlowSystemActor.NpcHouseNum('cExist') < 6:
        run ImmQBoard()
    else:
        EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:002', false)

flow Property_1_Sold():
    if EventFlowSystemActor.NpcHouseNum('cExist') < 6:
        run ImmQBoard()
    else:
        GeneralObject.SetTagFromSystem('cNpcNameplate', '"cDegit"', 0, 0, '""')
        EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:003', false)

flow Sign_Cafe():
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:031', false)

local flow Sub_grp_Event34(ItemPrice: int):
    if (EventFlowSystemActor.IsMyVillage()) and (System.EventFlags['cPlayer:MakeVillagePlayerFlag']):
        EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_MigrantsQuest:102', false)

flow Tailor_Reserve():
    EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:009', false)

flow TodaysFurniture():
    if EventFlowSystemActor.NetIsDreaming():
        EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Door:111_02', false)
    elif not EventFlowSystemActor.IsDuringBusinessHours('Market'):
        run System_Door_Market::Market_ClosedTime()
    elif EventFlowSystemActor.EnvHourOverGrowUp():
        EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Door:111_01', false)
    else:
        EventFlowSystemActor.SetTagFromSystem('cExpensivePurchase1', 'cDegit', 0, 0, '')
        EventFlowSystemActor.SetTagFromSystem('cExpensivePurchase2', 'cDegit', 1, 0, '')
        switch EventFlowSystemActor.ShopLevel():
            case `NooksCrannyInitial`:
                EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:011', false)
            case `NooksCrannyUpgraded`:
                EventFlowSystemActor.OpenMessageWindow('TalkObj/OBJ_Sign:012', false)
            default:
                return

