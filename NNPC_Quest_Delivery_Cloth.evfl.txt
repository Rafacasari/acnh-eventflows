flow Cloth():
    MainNpc.SetItemName(11, 0, 0)
    MainNpc.SetNpcName(3, 1)
    if MainNpc.DeliveryIsSameClothAsNowWear():
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:003', false)
        MainNpc.SetDeliveryItemApplySave()
        MainNpc.NpcDelivery(3, 'Default')
        MainNpc.QuestFlags['cDeliveryItemOpen'] = false
        run NotWear()
    else:
        MainNpc.SetItemToNpcStockList(2, 2)
        if MainNpc.DeliveryItemIsFavor():
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:001', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:004', true)
                run Recommend()
            else:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:005', false)
                run Sub_Event76()
        else:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:002', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:006', true)
                run Recommend()
            else:
                MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:007', false)
                run Sub_Event76()

flow NotWear():
    switch MainNpc.DeliveryQuestType():
        case 3:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:300', false)
            run NNPC_Quest_Delivery_End::Thanks2()
        case 4:
            switch MainNpc.CheckClientNpcLook():
                case 0:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:301', false)
                case 1:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:302', false)
                case 2:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:303', false)
                case 3:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:304', false)
                case 4:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:305', false)
                case 5:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:306', false)
                case 6:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:307', false)
                case 7:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:308', false)
            run NNPC_Quest_Delivery_End::Thanks3()
        default:
            return

flow Recommend():
    MainNpc.SetDeliveryClothToChange(0)
    MainNpc.NpcDelivery(4, 'Default')
    MainNpc.SetDeliveryClothInfo(0)
    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:100', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:101', false)
        run Sub_grp_Event74()
    else:
        MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:102', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:103', false)
            run Sub_grp_Event74()
        else:
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:104', false)
            MainNpc.SetDeliveryClothToChange(1)
            MainNpc.NpcDelivery(4, 'Default')
            MainNpc.SetDeliveryClothInfo(1)
            MainNpc.QuestFlags['cDeliveryClothChangeAtLeast'] = true
            MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:105', false)
            run NotWear()

local flow Sub_Event76():
    MainNpc.SetDeliveryItemApplySave()
    MainNpc.NpcDelivery(3, 'Default')
    MainNpc.QuestFlags['cDeliveryItemOpen'] = false
    run NotWear()

local flow Sub_grp_Event74():
    if MainNpc.IsBeforeClothFromPlayer():
        MainNpc.QuestFlags['cDeliveryOriginalClothFromPlayer'] = true
    if MainNpc.DeliveryOriginalIsReadyMade():
        MainNpc.QuestFlags['cDeliveryClothChange'] = true
    MainNpc.NpcSetShowFlag()
    MainNpc.QuestFlags['cDeliveryClothChangeKeep'] = true
    MainNpc.UpdateNpcUsuallyTops('cTops')
    run Wear()

flow Wear():
    switch MainNpc.DeliveryQuestType():
        case 3:
            switch MainNpc.CheckClientNpcLook():
                case 0:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:201', false)
                case 1:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:202', false)
                case 2:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:203', false)
                case 3:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:204', false)
                case 4:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:205', false)
                case 5:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:206', false)
                case 6:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:207', false)
                case 7:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:208', false)
            run NNPC_Quest_Delivery_End::Thanks2()
        case 4:
            switch MainNpc.CheckClientNpcLook():
                case 0:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:209', false)
                case 1:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:210', false)
                case 2:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:211', false)
                case 3:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:212', false)
                case 4:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:213', false)
                case 5:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:214', false)
                case 6:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:215', false)
                case 7:
                    MainNpc.OpenMessageWindow('TalkNNpc/B1_Bo/Quest/BO_Quest_Delivery_Cloth:216', false)
            run NNPC_Quest_Delivery_End::Thanks3()
        default:
            return

